{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Marta/Documents/UNIADRI/Interfaces/SegundaEntrega/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Marta/Documents/UNIADRI/Interfaces/SegundaEntrega/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Marta/Documents/UNIADRI/Interfaces/SegundaEntrega/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _this=this;import axios from'axios';import{useNavigate,useParams}from\"react-router-dom\";import{Cabecera}from\"../cabecera/cabecera\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var RecetasExpandidas=function RecetasExpandidas(){var _useParams=useParams(),idReceta=_useParams.idReceta;var URIreceta=\"https://recetap.herokuapp.com/recetas/\";var URIinstrucciones=\"https://recetap.herokuapp.com/instrucciones/\";var URIingredientes=\"https://recetap.herokuapp.com/ingredientes/\";var _useState=useState({}),_useState2=_slicedToArray(_useState,2),receta=_useState2[0],setReceta=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),instrucciones=_useState4[0],setInstrucciones=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),ingredientes=_useState6[0],setIngredientes=_useState6[1];useEffect(function(){getRecetaByID();},[]);var getRecetaByID=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,resIngredientes,resInstrucciones;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(URIreceta+idReceta);case 2:res=_context.sent;setReceta(res.data);_context.next=6;return axios.get(URIingredientes+res.data.Ingredients_id);case 6:resIngredientes=_context.sent;setIngredientes(resIngredientes.data.ingredientes);_context.next=10;return axios.get(URIinstrucciones+res.data.Instructions_id);case 10:resInstrucciones=_context.sent;setInstrucciones(resInstrucciones.data.instruccion);case 12:case\"end\":return _context.stop();}},_callee);}));return function getRecetaByID(){return _ref.apply(this,arguments);};}();console.log(receta);var URIrecetasusuarios=\"http://localhost:8000/recetasusuarios\";var guardarReceta=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id,e){var _idReceta,idUsuario,_receta,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_idReceta=id;idUsuario=localStorage.getItem('user');_context2.next=6;return axios.get(\"\".concat(URIrecetasusuarios,\"/idReceta/\").concat(_idReceta,\"/idUsuario/\").concat(idUsuario));case 6:_receta=_context2.sent;if(_receta.data==null){console.log(\"a\");result=axios.post(URIrecetasusuarios,{idReceta:id,idUsuario:localStorage.getItem('user')});alert(\"Receta guardada con éxito.\");}else{alert(\"La receta ya está guardada\");}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.error(\"Algo falló \"+_context2.t0);alert(\"Error al guardar receta\");case 14:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function guardarReceta(_x,_x2){return _ref2.apply(this,arguments);};}();document.title=\"Receta completa de \".concat(receta.Tittle);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Cabecera,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"tituloBuscador\",children:\"Detalles de la receta\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container cartaMar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:receta.Image_Name,className:\"img-fluid rounded-start\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:receta.Tittle}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:instrucciones}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:ingredientes}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Numero de comensales: \",receta.comensales]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Tiempo estimado: \",receta.tiempo,\" minutos\"]})})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:guardarReceta.bind(_this,receta.id),className:\"btn btn-success\",type:\"submit\",children:\"Guardar\"})]})})})]})]});};","map":{"version":3,"names":["axios","useNavigate","useParams","Cabecera","React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","RecetasExpandidas","_useParams","idReceta","URIreceta","URIinstrucciones","URIingredientes","_useState","_useState2","_slicedToArray","receta","setReceta","_useState3","_useState4","instrucciones","setInstrucciones","_useState5","_useState6","ingredientes","setIngredientes","getRecetaByID","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","resIngredientes","resInstrucciones","wrap","_callee$","_context","prev","next","get","sent","data","Ingredients_id","Instructions_id","instruccion","stop","apply","arguments","console","log","URIrecetasusuarios","guardarReceta","_ref2","_callee2","id","e","_idReceta","idUsuario","_receta","result","_callee2$","_context2","preventDefault","localStorage","getItem","concat","post","alert","t0","error","_x","_x2","document","title","Tittle","children","className","src","Image_Name","alt","comensales","tiempo","onClick","bind","_this","type"],"sources":["C:/Users/Marta/Documents/UNIADRI/Interfaces/SegundaEntrega/app/src/componentes/PaginasBuscador/recetasExpandidas.jsx"],"sourcesContent":["import axios from 'axios';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Cabecera } from \"../cabecera/cabecera\";\nimport React, { useState, useEffect } from 'react';\n\n\nexport const RecetasExpandidas = () => {\n   \n\n    const { idReceta } = useParams()\n    const URIreceta = \"https://recetap.herokuapp.com/recetas/\"\n    const URIinstrucciones = \"https://recetap.herokuapp.com/instrucciones/\"\n    const URIingredientes = \"https://recetap.herokuapp.com/ingredientes/\"\n\n    const [receta, setReceta] = useState({})\n    const [instrucciones, setInstrucciones] = useState(\"\")\n    const [ingredientes, setIngredientes] = useState(\"\")\n    useEffect(() => {\n        getRecetaByID()\n    }, [])\n\n    const getRecetaByID = async () => {\n        const res = await axios.get(URIreceta + idReceta)\n        setReceta(res.data)\n        const resIngredientes = await axios.get(URIingredientes + res.data.Ingredients_id)\n        setIngredientes(resIngredientes.data.ingredientes)\n        const resInstrucciones = await axios.get(URIinstrucciones + res.data.Instructions_id)\n        setInstrucciones(resInstrucciones.data.instruccion)\n    }\n    console.log(receta)\n    \n    const URIrecetasusuarios = \"http://localhost:8000/recetasusuarios\"\n    const guardarReceta = async (id, e) => {\n        e.preventDefault()\n        try{\n            const idReceta=id;\n            const idUsuario=localStorage.getItem('user');\n            const receta = await axios.get(`${URIrecetasusuarios}/idReceta/${idReceta}/idUsuario/${idUsuario}`);\n\n            \n            if (receta.data==null) {\n                console.log(\"a\")\n                const result = axios.post(URIrecetasusuarios,{\n                    idReceta: id,\n                    idUsuario:localStorage.getItem('user')\n                })\n                alert(\"Receta guardada con éxito.\");\n            }else{\n                alert(\"La receta ya está guardada\");\n            }\n        }catch (error){\n            console.error(\"Algo falló \" + error);\n            alert(\"Error al guardar receta\");\n        }\n    }\n\n    document.title =`Receta completa de ${receta.Tittle}`\n    \n\n    return (\n        <div>\n            <Cabecera />\n\n            <div className='container '>\n            <h1 className=\"tituloBuscador\">Detalles de la receta</h1>\n                <div className='container cartaMar'>\n                    <div className=\"card mb-3\" >\n                        <div className=\"row g-0\">\n                            <div className=\"col-md-4\">\n                                <img src={receta.Image_Name} className=\"img-fluid rounded-start\" alt=\"...\"/>\n                            </div>\n                            <div className=\"col-md-8\">\n                                <div className=\"card-body\">\n                                    <h5 className=\"card-title\">{receta.Tittle}</h5>\n                                    <p className=\"card-text\">{instrucciones}</p>\n                                    <p className=\"card-text\">{ingredientes}</p>\n                                    <p><small>Numero de comensales: {receta.comensales}</small></p>\n                                    <p><small>Tiempo estimado: {receta.tiempo} minutos</small></p>\n                                </div> \n                            </div>\n                            <button onClick={guardarReceta.bind(this, receta.id)} className=\"btn btn-success\" type=\"submit\">Guardar</button>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}